# 05 - 布局系统

## 布局基础

Flutter 使用约束（Constraints）系统来布局 Widget。父 Widget 向子 Widget 传递约束，子 Widget 根据约束决定自己的大小。

## 常用布局 Widget

### 1. Container
最常用的布局 Widget，可以设置大小、内边距、外边距、装饰等。

```dart
Container(
  width: 100,
  height: 100,
  padding: EdgeInsets.all(16),
  margin: EdgeInsets.all(8),
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(8),
  ),
  child: Text('Content'),
)
```

### 2. Padding
只提供内边距的 Widget。

```dart
Padding(
  padding: EdgeInsets.all(16),
  child: Text('Padded text'),
)
```

### 3. Center
将子 Widget 居中。

```dart
Center(
  child: Text('Centered'),
)
```

### 4. SizedBox
固定大小的空白 Widget。

```dart
SizedBox(
  width: 100,
  height: 100,
  child: Text('Fixed size'),
)
```

## Flex 布局

### Row（水平布局）

```dart
Row(
  mainAxisAlignment: MainAxisAlignment.spaceBetween,
  crossAxisAlignment: CrossAxisAlignment.center,
  children: [
    Text('Item 1'),
    Text('Item 2'),
    Text('Item 3'),
  ],
)
```

**MainAxisAlignment 选项：**
- `start`: 开始对齐
- `end`: 结束对齐
- `center`: 居中对齐
- `spaceBetween`: 两端对齐
- `spaceAround`: 环绕对齐
- `spaceEvenly`: 均匀分布

### Column（垂直布局）

```dart
Column(
  mainAxisAlignment: MainAxisAlignment.center,
  crossAxisAlignment: CrossAxisAlignment.stretch,
  children: [
    Text('Top'),
    Text('Middle'),
    Text('Bottom'),
  ],
)
```

### Expanded
在 Row 或 Column 中占据剩余空间。

```dart
Row(
  children: [
    Text('Fixed'),
    Expanded(
      child: Text('Expanded'),
    ),
    Text('Fixed'),
  ],
)
```

### Flexible
类似 Expanded，但更灵活。

```dart
Row(
  children: [
    Flexible(
      flex: 1,
      child: Container(color: Colors.red),
    ),
    Flexible(
      flex: 2,
      child: Container(color: Colors.blue),
    ),
  ],
)
```

## Stack 布局

用于重叠 Widget。

```dart
Stack(
  alignment: Alignment.center,
  children: [
    Container(
      width: 200,
      height: 200,
      color: Colors.blue,
    ),
    Positioned(
      top: 10,
      left: 10,
      child: Text('Top Left'),
    ),
    Positioned(
      bottom: 10,
      right: 10,
      child: Text('Bottom Right'),
    ),
  ],
)
```

## 列表布局

### ListView

```dart
ListView(
  children: [
    ListTile(title: Text('Item 1')),
    ListTile(title: Text('Item 2')),
    ListTile(title: Text('Item 3')),
  ],
)

// 动态列表
ListView.builder(
  itemCount: items.length,
  itemBuilder: (context, index) {
    return ListTile(title: Text(items[index]));
  },
)
```

### GridView

```dart
GridView.count(
  crossAxisCount: 2,
  children: [
    Container(color: Colors.red),
    Container(color: Colors.blue),
    Container(color: Colors.green),
    Container(color: Colors.yellow),
  ],
)
```

## 响应式布局

### MediaQuery
获取屏幕信息。

```dart
MediaQuery.of(context).size.width
MediaQuery.of(context).size.height
```

### LayoutBuilder
根据约束构建布局。

```dart
LayoutBuilder(
  builder: (context, constraints) {
    if (constraints.maxWidth > 600) {
      return Row(children: [/* ... */]);
    } else {
      return Column(children: [/* ... */]);
    }
  },
)
```

## 下一步

学习如何管理应用状态，查看 [状态管理](./06-状态管理.md)！

